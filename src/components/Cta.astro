---
import { marked } from 'marked';
import { type CtaSection } from 'types';
import Action from '@components/Action.astro';
import Section from '@components/Section.astro';

interface Props extends CtaSection {
    'data-sb-field-path'?: string;
}

const { heading, body, cta, ...rest } = Astro.props;
---

<Section {...rest} class=''>
    <div class='text-center max-w-5xl mx-auto'>
        <!-- Main CTA Content Box -->
        <div class='bg-white/95 backdrop-blur-sm rounded-3xl p-12 shadow-2xl border border-white/40 mb-16'>
            {
                heading && (
                    <h2 class='text-4xl lg:text-6xl font-black font-heading text-primary mb-8 leading-tight' data-sb-field-path='.heading'>
                        {heading}
                    </h2>
                )
            }
            {
                body && (
                    <div
                        class='text-xl lg:text-2xl text-base-content/80 max-w-4xl mx-auto mb-12 font-body leading-relaxed'
                        data-sb-field-path='.body'
                        set:html={marked.parse(body)}
                    />
                )
            }

            <!-- CTA Buttons with Enhanced Spacing -->
            {
                cta && cta.length > 0 && (
                    <div class='flex flex-col sm:flex-row items-center justify-center gap-6 mb-8' data-sb-field-path='.cta'>
                        {cta.map((item, index) => (
                            <Action
                                action={item}
                                class:list={[
                                    item._type === 'actionButton' && (item as any).theme === 'primary'
                                        ? 'btn bg-gradient-to-r from-accent to-accent-dark text-white btn-lg px-12 py-6 text-xl font-bold shadow-2xl hover:shadow-accent/50 hover:scale-110 hover:-translate-y-2 transition-all duration-500 border-0 min-w-[320px] group relative overflow-hidden'
                                        : item._type === 'actionLink'
                                          ? 'text-primary hover:text-primary-dark font-semibold text-lg underline-offset-4 hover:underline transition-all duration-300 flex items-center gap-2'
                                          : 'font-bold underline hover:no-underline text-lg'
                                ]}
                                data-sb-field-path={`.${index}`}
                            />
                        ))}
                    </div>
                )
            }

            <!-- Trust Indicators Line -->
            <div class='flex flex-wrap items-center justify-center gap-8 pt-6 border-t border-base-200'>
                <div class='flex items-center gap-2 text-primary font-semibold'>
                    <iconify-icon icon='heroicons:shield-check' width='20' height='20'></iconify-icon>
                    <span class='text-sm font-medium'>HIPAA Secure</span>
                </div>
                <div class='flex items-center gap-2 text-secondary font-semibold'>
                    <iconify-icon icon='heroicons:clock' width='20' height='20'></iconify-icon>
                    <span class='text-sm font-medium'>24-Hour Response</span>
                </div>
                <div class='flex items-center gap-2 text-accent font-semibold'>
                    <iconify-icon icon='heroicons:check-circle' width='20' height='20'></iconify-icon>
                    <span class='text-sm font-medium'>Free Quote</span>
                </div>
            </div>
        </div>

        <!-- Supporting Details - Visually Subordinate -->
        <div class='bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-md border border-base-200 max-w-4xl mx-auto opacity-90'>
            <h3 class='text-lg font-bold text-center text-primary mb-6'>Why Healthcare Organizations Choose Trius</h3>

            <div class='grid md:grid-cols-3 gap-6 text-center'>
                <!-- HIPAA Compliance -->
                <div class='flex flex-col items-center'>
                    <div
                        class='w-12 h-12 bg-gradient-to-br from-primary/80 to-primary/60 rounded-xl flex items-center justify-center mb-3 shadow-md'
                    >
                        <iconify-icon icon='heroicons:shield-check' width='24' height='24' style='color: white;'></iconify-icon>
                    </div>
                    <h4 class='text-md font-bold font-heading text-primary mb-2'>HIPAA Compliant</h4>
                    <p class='text-sm text-base-content/70 font-body leading-relaxed'>
                        Full patient privacy protection and secure handling protocols
                    </p>
                </div>

                <!-- OSHA Certified -->
                <div class='flex flex-col items-center'>
                    <div
                        class='w-12 h-12 bg-gradient-to-br from-secondary/80 to-secondary/60 rounded-xl flex items-center justify-center mb-3 shadow-md'
                    >
                        <iconify-icon icon='heroicons:shield-exclamation' width='24' height='24' style='color: white;'></iconify-icon>
                    </div>
                    <h4 class='text-md font-bold font-heading text-secondary mb-2'>OSHA Certified</h4>
                    <p class='text-sm text-base-content/70 font-body leading-relaxed'>
                        Safety-trained couriers with biohazard handling expertise
                    </p>
                </div>

                <!-- 24/7 Service -->
                <div class='flex flex-col items-center'>
                    <div
                        class='w-12 h-12 bg-gradient-to-br from-accent/80 to-accent/60 rounded-xl flex items-center justify-center mb-3 shadow-md'
                    >
                        <iconify-icon icon='heroicons:clock' width='24' height='24' style='color: white;'></iconify-icon>
                    </div>
                    <h4 class='text-md font-bold font-heading text-accent mb-2'>24/7 Available</h4>
                    <p class='text-sm text-base-content/70 font-body leading-relaxed'>
                        Round-the-clock emergency and STAT delivery services
                    </p>
                </div>
            </div>

            <!-- Guarantee Statement -->
            <div class='mt-6 pt-4 border-t border-base-200 text-center'>
                <div class='flex items-center justify-center gap-2 text-primary font-semibold mb-2'>
                    <iconify-icon icon='heroicons:shield-check' width='20' height='20'></iconify-icon>
                    <span class='text-md font-heading'>24-Hour Response Guarantee</span>
                </div>
                <p class='text-sm text-base-content/70 font-body'>
                    Response to all quote requests within 24 hours, with same-day service for emergency deliveries.
                </p>
            </div>
        </div>
    </div>
</Section>

<style>
    /* Enhanced CTA Button Animations */
    .btn.group::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.6s;
    }

    .btn.group:hover::before {
        left: 100%;
    }

    /* Accessibility improvements */
    @media (prefers-reduced-motion: reduce) {
        .btn {
            transition: none !important;
            transform: none !important;
        }

        .btn:hover {
            transform: none !important;
        }
    }

    /* Enhanced focus states for accessibility */
    .btn:focus-visible {
        outline: 3px solid currentColor;
        outline-offset: 3px;
    }

    /* Secondary CTA hover effect */
    .text-primary.hover\\:underline:hover {
        text-decoration-thickness: 2px;
    }

    /* Gradient button hover glow effect */
    .btn.bg-gradient-to-r:hover {
        box-shadow:
            0 20px 25px -5px rgba(239, 68, 68, 0.2),
            0 10px 10px -5px rgba(239, 68, 68, 0.1);
    }
</style>

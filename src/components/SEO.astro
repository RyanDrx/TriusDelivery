---
// src/components/SEO.astro
import { Schema } from 'astro-seo-schema';

export interface Props {
    title: string;
    description?: string;
    image?: string;
    noindex?: boolean;
    graph?: any; // allow any schema structure
}

const { title, description = '', image, noindex = false, graph } = Astro.props;

// Allow either Graph or array of nodes
const json = Array.isArray(graph) ? { '@context': 'https://schema.org', '@graph': graph } : (graph ?? null);
---

<title>{title}</title>
<meta name='description' content={description} />
<link rel='canonical' href={Astro.url.href} />
{noindex && <meta name='robots' content='noindex,nofollow' />}

<meta property='og:title' content={title} />
{description && <meta property='og:description' content={description} />}
{image && <meta property='og:image' content={image} />}

{json && <Schema item={json} />}
